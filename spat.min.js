"use strict";var spat={};riot.tag2("spat-modal","","","",function(t){}),riot.tag2("spat-nav",'<div ref="pages" class="spat-pages"></div> <div if="{_locked}" ref="lock" class="spat-lock"></div>','spat-nav,[data-is="spat-nav"]{position:relative;display:block;width:100%;height:100%} spat-nav .spat-pages,[data-is="spat-nav"] .spat-pages{position:absolute;width:100%;height:100%} spat-nav .spat-pages .spat-page,[data-is="spat-nav"] .spat-pages .spat-page{position:absolute;width:100%;height:100%;backface-visibility:hidden;animation-fill-mode:forwards;overflow:scroll} spat-nav .spat-pages .spat-page.spat-hide,[data-is="spat-nav"] .spat-pages .spat-page.spat-hide{display:none} spat-nav .spat-lock,[data-is="spat-nav"] .spat-lock{position:fixed;top:0;right:0;bottom:0;left:0;z-index:9999;background-color:transparent}@keyframes slide-in{ 0%{transform:translate(250px, 0);opacity:0} 100%{transform:translate(0, 0);opacity:1}}@keyframes slide-out{ 0%{opacity:1} 100%{opacity:.8}}@keyframes scale-in{ 0%{transform:scale(.5);opacity:0} 0%{transform:scale(.5);opacity:0} 100%{transform:scale(1);opacity:1}}@keyframes scale-out{ 0%{transform:scale(1);opacity:1} 50%{transform:scale(1.5);opacity:0} 100%{transform:scale(1.5);opacity:0}}@keyframes rotate-in{ 0%{transform:perspective(800px) rotateY(180deg);opacity:0} 100%{transform:perspective(800px) rotateY(0deg);opacity:1}}@keyframes rotate-out{ 0%{transform:perspective(800px) rotateY(0deg);opacity:1} 100%{transform:perspective(800px) rotateY(-180deg);opacity:0}}',"",function(t){var a=this;this._back=!1,this._locked=!1,this.tagName=function(t){return t||"home"},this.lock=function(t){this._locked=!0,this.update(),t&&(this.refs.lock.style.backgroundColor=t)},this.unlock=function(){this._locked=!1,this.refs.lock.style.backgroundColor="",this.update()},this.swap=function(t){t=a.tagName.apply(a,arguments);var i=this.currentPage,o=this.refs.pages.querySelector("[data-is="+t+"]");if(o){if(!this._back){var s=o.parentNode;s.removeChild(o),s.appendChild(o)}}else o=document.createElement("div"),o.classList.add("spat-page"),this.refs.pages.appendChild(o),riot.mount(o,t);var n={prevPage:i,currentPage:o,query:route.query(),args:Array.prototype.slice.call(arguments),back:a._back};o.classList.remove("spat-hide"),o._tag.trigger("show",n),this.lock(),e(o,i,this._back).then(function(){i&&i.classList.add("spat-hide"),a.unlock()}),a._back=!1,this.currentPage=o,this.prevPage=i},this.goto=function(t,a){var e="";e="string"==typeof t?t:t.currentTarget.getAttribute("href"),riot.spat.opts=a,riot.route(e)},this.back=function(t,e){a._back=!0,"number"==typeof t?history.go(-t):history.back()},this.on("mount",function(){route.start(!0)}),route(function(t){a.swap.apply(a,arguments)}),window.spat=window.spat||{},window.spat.nav=this;var e=function(t,a,e){var s=e!==!0?t._tag.animation:a._tag.animation;if(!s||!s.name)return Promise.resolve();if(e)var n="reverse",r=s.name+"-out",p=s.name+"-in",c="256ms";else var n="",r=s.name+"-in",p=s.name+"-out",c="256ms";return new Promise(function(e){i(t,r,c,n),o(t,"animationend",function(){i(t),e()}),a&&(i(a,p,c,n),o(a,"animationend",function(){i(a)}))})},i=function(t,a,e,i){t.style.animationDuration=e||"",t.style.animationDirection=i||"",t.style.animationName=a||""},o=function(t,a,e){var i=function(){t.removeEventListener(a,i,!1),e()};t.addEventListener(a,i,!1)}}),riot.tag2("spat-nav-old",'<div name="contents" class="spat-contents"></div> <div if="{lock}" class="spat-lock"></div>','spat-nav-old,[data-is="spat-nav-old"]{display:block;width:100%;height:100%} spat-nav-old .spat-content,[data-is="spat-nav-old"] .spat-content{position:absolute;top:0;right:0;bottom:0;left:0;display:block;width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch;backface-visibility:hidden;z-index:5;animation-duration:300ms;animation-timing-function:ease-in-out} spat-nav-old .spat-content.spat-hide,[data-is="spat-nav-old"] .spat-content.spat-hide{display:none} spat-nav-old .spat-lock,[data-is="spat-nav-old"] .spat-lock{position:fixed;top:0;right:0;bottom:0;left:0;z-index:9999;background-color:rgba(255,0,0,0.2);background-color:transparent}@keyframes slide-in{ 0%{transform:translate(250px, 0);opacity:0} 100%{transform:translate(0, 0);opacity:1}}@keyframes slide-out{ 0%{opacity:1} 100%{opacity:.8}}@keyframes scale-in{ 0%{transform:scale(.5);opacity:0} 0%{transform:scale(.5);opacity:0} 100%{transform:scale(1);opacity:1}}@keyframes scale-out{ 0%{transform:scale(1);opacity:1} 50%{transform:scale(1.5);opacity:0} 100%{transform:scale(1.5);opacity:0}}@keyframes rotate-in{ 0%{transform:perspective(800px) rotateY(180deg);opacity:0} 100%{transform:perspective(800px) rotateY(0deg);opacity:1}}@keyframes rotate-out{ 0%{transform:perspective(800px) rotateY(0deg);opacity:1} 100%{transform:perspective(800px) rotateY(-180deg);opacity:0}}',"",function(t){var a=this;this.lock=!1,this.stack=[],this.animationMap={item:{name:"scale"}},this.tagName=function(t){return t||"home"},this.on("mount",function(){}),this.on("updated",function(){riot.route.start(!0)}),this.back=function(){a._back=!0,history.back()},this.replace=function(){};var e=function(t,a,e,i){t.style.animationDuration=e||"",t.style.animationDirection=i||"",t.style.animationName=a||""},i=function(t,a,e){var i=function(){t.removeEventListener(a,i,!1),e()};t.addEventListener(a,i,!1)};this._swap=function(t,a,o,s){var n=o!==!0?t._tag.animation:a._tag.animation;if(!n||!n.name)return void s();var r=n.time||500;o?e(t,n.name+"-out",r,"reverse"):e(t,n.name+"-in",r),i(t,"animationend",function(){e(t)}),a?(o?e(a,n.name+"-in",r,"reverse"):e(a,n.name+"-out",r),i(a,"animationend",function(){e(a),s()})):s()},riot.route(function(t){t=a.tagName.apply(a,arguments);var e=a.currentContent,i={prevTag:e?e._tag:null,opts:riot.spat.opts||{},hashes:location.hash.split("?")[0].split("/"),query:riot.route.query(),args:Array.prototype.slice.call(arguments),back:a._back};if(e&&e.getAttribute("riot-tag")===t)return void e._tag.trigger("active",i);var o=a.root.getElementsByTagName(t)[0];if(o){if(!a._back){var s=o.parentNode;s.removeChild(o),s.appendChild(o)}}else o=document.createElement(t),o.classList.add("spat-content"),a.contents.appendChild(o),riot.mount(t,t,{app:a});e&&e._tag.trigger("hide",i),o._tag.trigger("active",i),a.lock=!0,a.update(),a._swap(o,e,a._back,function(){if(e)if(e._tag.cache!==!1)e.classList.add("spat-hide");else{var t=e.parentNode;t.removeChild(e)}a.lock=!1,a.update()}),a.trigger("swap",{next:o,prev:e,back:a._back}),o.classList.remove("spat-hide"),a._back=!1,a.prev=e,a.currentContent=o,a.stack.push(e),delete riot.spat.opts}),riot.spat={goto:function(t,a){var e="";e="string"==typeof t?t:t.currentTarget.getAttribute("href"),riot.spat.opts=a,riot.route(e)},back:function(t,e){a._back=!0,riot.spat.opts=e,"number"==typeof t?history.go(-t):history.back()}}});